"use strict";(self.webpackChunkflashscore=self.webpackChunkflashscore||[]).push([[1909],{23831:(e,t,n)=>{var i,r=n(81923);n(71500);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.NOT_INITIALIZED="NOT_INITIALIZED",e.INITIALIZED="PERMISSION_GRANTED",e.PERMISSION_DENIED="PERMISSION_DENIED",e.UNSUPPORTED="UNSUPPORTED"}(i||(i={}));let a=function(){function e(t,n,i,r,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_requestNotificationPermission",void 0),o(this,"_serviceWorkerSupportCheck",void 0),o(this,"_subscribeServiceWorker",void 0),o(this,"_messagingServiceWorker",void 0),o(this,"_registerTokenListener",void 0),o(this,"_logger",void 0),o(this,"_stepRunCache",new Map),this._requestNotificationPermission=t,this._serviceWorkerSupportCheck=n,this._subscribeServiceWorker=i,this._messagingServiceWorker=r,this._registerTokenListener=s,this._logger=a}var t,n,r;return t=e,(n=[{key:"run",value:function(){return this._rejectWith(this._serviceWorkerSupportCheck.make(),i.UNSUPPORTED).then((()=>this._rejectWith(this._requestNotificationPermission.make(),i.PERMISSION_DENIED))).then((()=>this._rejectWith(this._subscribeServiceWorker.make(),i.UNSUPPORTED))).then((e=>this._rejectWith(this._runWhenNotSuccessfulAlready(this._messagingServiceWorker,e),i.UNSUPPORTED))).then((()=>this._rejectWith(this._registerTokenListener.make(),i.UNSUPPORTED))).then((()=>Promise.resolve(i.INITIALIZED)))}},{key:"_runWhenNotSuccessfulAlready",value:function(e,t){return this._stepRunCache.has(e)?Promise.resolve(this._stepRunCache.get(e)):e.make(t).then((t=>(this._stepRunCache.set(e,t),Promise.resolve(t))))}},{key:"_rejectWith",value:function(e,t){return e.catch((e=>(this._logger(e),Promise.reject(t))))}}])&&s(t.prototype,n),r&&s(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_delegate",void 0),u(this,"_onResult",void 0),this._delegate=t,this._onResult=n}var t,n,i;return t=e,(n=[{key:"make",value:function(e){return this._delegate.make(e).then((e=>(this._onResult(e),Promise.resolve(e))))}}])&&l(t.prototype,n),i&&l(t,i),e}();function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let f=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="messaging")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.messaging=t}var t,n,i;return t=e,(n=[{key:"make",value:function(){return this.messaging.requestPermission()}}])&&h(t.prototype,n),i&&h(t,i),e}();function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"navigator",void 0),p(this,"window",void 0),this.navigator=t,this.window=n}var t,n,i;return t=e,(n=[{key:"make",value:function(){return"serviceWorker"in this.navigator&&"PushManager"in this.window?Promise.resolve():Promise.reject("Push messages not supported")}}])&&_(t.prototype,n),i&&_(t,i),e}();function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"pushServiceWorkerLocation",void 0),b(this,"navigator",void 0),this.navigator=t,this.pushServiceWorkerLocation=n}var t,n,i;return t=e,(n=[{key:"make",value:function(){return this.navigator.serviceWorker.register(this.pushServiceWorkerLocation).then((e=>Promise.resolve(e))).catch((e=>Promise.reject("SW registration failed: "+JSON.stringify(e))))}}])&&d(t.prototype,n),i&&d(t,i),e}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let m=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="messaging")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.messaging=t}var t,n,i;return t=e,(n=[{key:"make",value:function(e){return this.messaging.useServiceWorker(e),Promise.resolve()}}])&&y(t.prototype,n),i&&y(t,i),e}();function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"messaging",void 0),k(this,"tokenListener",void 0),this.messaging=t,this.tokenListener=n}var t,n,i;return t=e,(n=[{key:"make",value:function(){return this.messaging.onTokenRefresh((()=>{this.messaging.getToken().then((e=>{e&&this.tokenListener(e)})).catch((e=>{}))})),this.messaging.getToken().then((e=>{e&&this.tokenListener(e)}))}}])&&w(t.prototype,n),i&&w(t,i),e}();var P;function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.DEFAULT="default",e.DENIED="denied",e.GRANTED="granted"}(P||(P={}));let S=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_windowPermissionProvider")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._windowPermissionProvider=t}var t,n,i;return t=e,(n=[{key:"getPermissions",value:function(){let e=P.DEFAULT;switch(this._windowPermissionProvider()){case"denied":e=P.DENIED;break;case"granted":e=P.GRANTED}return Promise.resolve(e)}}])&&T(t.prototype,n),i&&T(t,i),e}();var O;function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.HTML_TEMPLATE='<div id="notifications-alert">\n\t<div class="alert alert--notifications">##MESSAGE##</div>\n</div>'}(O||(O={}));let A=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"_windowPermissionProvider",void 0),E(this,"_alertWrapper",void 0),E(this,"_utilTrans",void 0),E(this,"_storage",void 0),E(this,"_hidden",!1),E(this,"_subscribeCallback",(()=>{})),E(this,"_pendingCallback",(()=>{})),E(this,"_deniedCallback",(()=>{})),this._windowPermissionProvider=t,this._alertWrapper=n}var t,n,i;return t=e,(n=[{key:"run",value:async function(){switch(await this.getStatus()){case P.DEFAULT:this._alertNotificationsDefault();break;case P.GRANTED:this._alertNotificationGranted();break;case P.DENIED:this._alertNotificationDenied()}}},{key:"getStatus",value:async function(){return new S(this._windowPermissionProvider).getPermissions()}},{key:"setTranslations",value:function(e){return this._utilTrans=e,this}},{key:"setStorage",value:function(e){return this._storage=e,this}},{key:"setSubscribeCallback",value:function(e){return this._subscribeCallback=e,this}},{key:"setPendingCallback",value:function(e){return this._pendingCallback=e,this}},{key:"setDeniedCallback",value:function(e){return this._deniedCallback=e,this}},{key:"showAlert",value:function(){this._alertWrapper&&!this._hidden&&(this._alertWrapper.style.display="block")}},{key:"hideAlert",value:function(){this._hidden=!0,this._alertWrapper&&(this._alertWrapper.style.display="none")}},{key:"_alertNotificationsDefault",value:function(){const e=!!this._storage.getSession("LS_notifications_dismissed");if(this._alertWrapper&&!e){let e=O.HTML_TEMPLATE;const t=this._utilTrans.translate("TRANS_NOTIFICATIONS_ARE_OFF"),n=this._utilTrans.translate("TRANS_NOTIFICATIONS_PROMPT"),i=this._utilTrans.translate("TRANS_NOTIFICATIONS_SET");e=e.replace("##MESSAGE##",`\n\t\t\t\t\t<div class="alert__icon"></div>\n\t\t\t\t\t<div class="alert__close" onclick="this.parentElement.style.display = 'none'"></div>\n\t\t\t\t\t<div class="alert__text"><strong>${t}.</strong> ${n}</div>\n\t\t\t\t\t<div id="notifications-alert-button" class="alert__button">${i}</div>`),this._alertWrapper.innerHTML=e;const r=document.getElementById("notifications-alert-button");r&&(r.onclick=this._subscribeCallback),this._pendingCallback()}}},{key:"_alertNotificationGranted",value:function(){this._alertWrapper&&this.hideAlert(),this._subscribeCallback()}},{key:"_alertNotificationDenied",value:function(){const e=!!this._storage.getSession("LS_notifications_dismissed");if(this._alertWrapper&&!e){let e=O.HTML_TEMPLATE;const t=this._utilTrans.translate("TRANS_NOTIFICATIONS_BLOCKED_BY_BROWSER"),n=this._utilTrans.translate("TRANS_NOTIFICATIONS_BLOCKED_PROMPT");e=e.replace("##MESSAGE##",`\n\t\t\t\t\t<div class="alert__icon"></div>\n\t\t\t\t\t<div class="alert__close" onclick="this.parentElement.style.display = 'none'"></div>\n\t\t\t\t\t<div class="alert__text"><strong>${t}.</strong> ${n}</div>`),this._alertWrapper.innerHTML=e,this.showAlert()}this._deniedCallback()}}])&&I(t.prototype,n),i&&I(t,i),e}();var j=n(25702);function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let q=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_pathPrefix")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._pathPrefix=t}var t,n,i;return t=e,(n=[{key:"makeRequest",value:function(e){const t={};for(const n in e.params)t[n]=e.params[n];return new j.c(this._pathPrefix+e.path+"/",t)}}])&&N(t.prototype,n),i&&N(t,i),e}();function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let R=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,"_requestProvider",void 0),L(this,"_apiResponseChecker",void 0),L(this,"_requestor",void 0),this._requestProvider=t,this._apiResponseChecker=n,this._requestor=i}var t,n,i;return t=e,(n=[{key:"makeCall",value:function(e){return this._requestor.makeRequest(this._requestProvider.makeFor(e)).then((e=>this._apiResponseChecker.isOk(e)?Promise.resolve():Promise.reject("Invalid server response: '"+JSON.stringify(e)+"'")))}}])&&D(t.prototype,n),i&&D(t,i),e}();function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"isOk",value:function(e){return"ok"==e.getContent()}}])&&F(t.prototype,n),i&&F(t,i),e}();function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"throwOnInvalidParams",value:function(e){if(!Array.isArray(e))throw new Error("Params should be array");if(!e.length)throw new Error("Params should be non array");e.forEach((e=>null!=e.getId()))}}])&&x(t.prototype,n),i&&x(t,i),e}();function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let z=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,"_apiCallDelegate",void 0),G(this,"_paramsValidator",void 0),this._apiCallDelegate=t,this._paramsValidator=n}var t,n,i;return t=e,(n=[{key:"makeCall",value:function(e){try{this._paramsValidator.throwOnInvalidParams(e)}catch(t){return Promise.reject("Invalid params '"+JSON.stringify(e)+"'. "+t.message)}return this._apiCallDelegate.makeCall(e)}}])&&U(t.prototype,n),i&&U(t,i),e}();function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function H(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Z=function(){function e(t,n,i){J(this,e),B(this,"_requestProvider",void 0),B(this,"_responseChecker",void 0),B(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new K(n,i),this._responseChecker=new W}return H(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new M)}}]),e}(),K=function(){function e(t,n){J(this,e),B(this,"_tokenPart",void 0),B(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return H(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe",params:{channels:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ee=function(){function e(t,n,i){$(this,e),X(this,"_requestProvider",void 0),X(this,"_responseChecker",void 0),X(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new te(n,i),this._responseChecker=new W}return Q(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new M)}}]),e}(),te=function(){function e(t,n){$(this,e),X(this,"_tokenPart",void 0),X(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return Q(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"unsubscribe",params:{channels:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"throwOnInvalidParams",value:function(e){if(!Array.isArray(e))throw new Error("Params should be array");if(!e.length)throw new Error("Params should be non array");e.forEach((e=>null!=e.getValue()))}}])&&ne(t.prototype,n),i&&ne(t,i),e}();function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oe(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let le=function(){function e(t,n,i){re(this,e),ae(this,"_requestProvider",void 0),ae(this,"_responseChecker",void 0),ae(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new ce(n,i),this._responseChecker=new W}return oe(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new ue)}}]),e}(),ue=function(){function e(){re(this,e),ae(this,"_channelsValidator",new M),ae(this,"_settingsValidator",new ie)}return oe(e,[{key:"throwOnInvalidParams",value:function(e){if(!Array.isArray(e))throw new Error("Params should be array [Channel[], Option[]]");this._channelsValidator.throwOnInvalidParams(e[0]),this._settingsValidator.throwOnInvalidParams(e[1])}}]),e}(),ce=function(){function e(t,n){re(this,e),ae(this,"_tokenPart",void 0),ae(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return oe(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe-all",params:{channels:JSON.stringify(e[0].map((e=>e.getId()))),settings:JSON.stringify(e[1].map((e=>e.getValue()))),token:this._tokenPart()}})}}]),e}();function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _e(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ve=function(){function e(t,n,i){he(this,e),pe(this,"_requestProvider",void 0),pe(this,"_responseChecker",void 0),pe(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new de(n,i),this._responseChecker=new W}return _e(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new ie)}}]),e}(),de=function(){function e(t,n){he(this,e),pe(this,"_tokenPart",void 0),pe(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return _e(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"settings",params:{settings:JSON.stringify(e.map((e=>e.getValue()))),token:this._tokenPart()}})}}]),e}();function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let we=function(){function e(t,n,i){be(this,e),me(this,"_requestProvider",void 0),me(this,"_responseChecker",void 0),me(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new ke(n,i),this._responseChecker=new W}return ye(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new ie)}}]),e}(),ke=function(){function e(t,n){be(this,e),me(this,"_tokenPart",void 0),me(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return ye(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe-token",params:{settings:JSON.stringify(e.map((e=>e.getValue()))),token:this._tokenPart()}})}}]),e}();function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Te(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Oe=function(){function e(t,n,i){Ce(this,e),Se(this,"_requestProvider",void 0),Se(this,"_responseChecker",void 0),Se(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new Ie(n,i),this._responseChecker=new W}return Te(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new M)}}]),e}(),Ie=function(){function e(t,n){Ce(this,e),Se(this,"_tokenPart",void 0),Se(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return Te(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"subscribe-disable",params:{channelsDisabled:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function je(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let qe=function(){function e(t,n,i){Ee(this,e),Ne(this,"_requestProvider",void 0),Ne(this,"_responseChecker",void 0),Ne(this,"_requestor",void 0),this._requestor=t,this._requestProvider=new De(n,i),this._responseChecker=new W}return je(e,[{key:"make",value:function(){return new z(new R(this._requestProvider,this._responseChecker,this._requestor),new M)}}]),e}(),De=function(){function e(t,n){Ee(this,e),Ne(this,"_tokenPart",void 0),Ne(this,"_requestFormatter",void 0),this._tokenPart=t,this._requestFormatter=n}return je(e,[{key:"makeFor",value:function(e){return this._requestFormatter.makeRequest({path:"unsubscribe-disable",params:{channelsDisabled:JSON.stringify(e.map((e=>e.getId()))),token:this._tokenPart()}})}}]),e}();function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Fe=function(){function e(t,n,i,r,s,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Re(this,"_addChannelsApiCall",void 0),Re(this,"_removeChannelsApiCall",void 0),Re(this,"_updateSettingsApiCall",void 0),Re(this,"_unSubscribeAllApiCall",void 0),Re(this,"_subscribeAllApiCall",void 0),Re(this,"_unSubscribeDisableApiCall",void 0),Re(this,"_subscribeDisableApiCall",void 0),this._addChannelsApiCall=t,this._removeChannelsApiCall=n,this._updateSettingsApiCall=i,this._unSubscribeAllApiCall=r,this._subscribeAllApiCall=s,this._unSubscribeDisableApiCall=o,this._subscribeDisableApiCall=a}var t,n,i;return t=e,(n=[{key:"addChannels",value:function(e){return this._addChannelsApiCall.makeCall(e)}},{key:"removeChannels",value:function(e){return this._removeChannelsApiCall.makeCall(e)}},{key:"updateSettings",value:function(e){return this._updateSettingsApiCall.makeCall(e)}},{key:"subscribeAll",value:function(e,t){return this._subscribeAllApiCall.makeCall([e,t])}},{key:"unSubscribeAll",value:function(e){return this._unSubscribeAllApiCall.makeCall(e)}},{key:"subscribeDisable",value:function(e){return this._subscribeDisableApiCall.makeCall(e)}},{key:"unSubscribeDisable",value:function(e){return this._unSubscribeDisableApiCall.makeCall(e)}}])&&Le(t.prototype,n),i&&Le(t,i),e}();var We=n(84004);function xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Me(this,"_delegateApi",void 0),Me(this,"_promiseSerializer",void 0),this._delegateApi=t,this._promiseSerializer=new We.$b({nextPromise:e=>e()})}var t,n,i;return t=e,(n=[{key:"addChannels",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.addChannels(e)))}},{key:"removeChannels",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.removeChannels(e)))}},{key:"updateSettings",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.updateSettings(e)))}},{key:"subscribeAll",value:function(e,t){return this._promiseSerializer.next((()=>this._delegateApi.subscribeAll(e,t)))}},{key:"unSubscribeAll",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.unSubscribeAll(e)))}},{key:"subscribeDisable",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.subscribeDisable(e)))}},{key:"unSubscribeDisable",value:function(e){return this._promiseSerializer.next((()=>this._delegateApi.unSubscribeDisable(e)))}}])&&xe(t.prototype,n),i&&xe(t,i),e}();function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ze(this,"_requestor",void 0),ze(this,"_userTokenGetter",void 0),ze(this,"_platformPrefix","")}var t,n,i;return t=e,(n=[{key:"setRequestor",value:function(e){return this._requestor=e,this}},{key:"setPlatformPrefix",value:function(e){return this._platformPrefix=e,this}},{key:"setUserTokenGetter",value:function(e){return this._userTokenGetter=e,this}},{key:"build",value:function(){const e=new Z(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make(),t=new ee(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make(),n=new ve(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make(),i=new we(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make(),r=new le(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make(),s=new Oe(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make(),o=new qe(this._requestor,this._userTokenGetter,new q(this._platformPrefix)).make();return new Ue(new Fe(e,t,n,i,r,o,s))}}])&&Ge(t.prototype,n),i&&Ge(t,i),e}();function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Be=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,"pushApi",void 0),He(this,"subscriptionCollectionFactory",void 0),He(this,"disabledSubscriptionCollectionFactory",void 0),He(this,"settingsCollectionFactory",void 0),He(this,"doInit",!0),He(this,"promiseSerializer",void 0),He(this,"subscribedEmpty",!1),this.pushApi=t,this.subscriptionCollectionFactory=n,this.disabledSubscriptionCollectionFactory=i,this.settingsCollectionFactory=r,this.promiseSerializer=new We.$b({nextPromise:e=>e()})}var t,n,i;return t=e,(n=[{key:"channelsChanged",value:function(e,t,n){return this.promiseSerializer.next((()=>{if(0==e.length&&this.subscribedEmpty)return Promise.resolve();if(0==e.length)return this.doInit=!0,this.pushApi.unSubscribeAll(n).then((()=>{this.subscribedEmpty=!0}));if(this.subscribedEmpty=!1,this.doInit)return Promise.all([this.pushApi.subscribeAll(e,n),t.length?this.pushApi.subscribeDisable(t):void 0]).then((()=>(this.doInit=!1,Promise.resolve())));const i=[],r=[],s=[],o=[],a=this.subscriptionCollectionFactory(),l=this.disabledSubscriptionCollectionFactory();return e.forEach((e=>{a.has(e)||i.push(e)})),t.forEach((e=>{l.has(e)||s.push(e)})),a.getAll().forEach((t=>{let n=!1;for(const i of e)if(JSON.stringify(i)==JSON.stringify(t)){n=!0;break}n||r.push(t)})),l.getAll().forEach((e=>{let n=!1;for(const i of t)if(JSON.stringify(i)==JSON.stringify(e)){n=!0;break}n||o.push(e)})),Promise.all([i.length?this.pushApi.addChannels(i):void 0,r.length?this.pushApi.removeChannels(r):void 0,s.length?this.pushApi.subscribeDisable(s):void 0,o.length?this.pushApi.unSubscribeDisable(o):void 0,this.handleSettings(n)]).then((()=>Promise.resolve()))}))}},{key:"handleSettings",value:function(e){const t=this.settingsCollectionFactory();let n=!1;for(const i of e)if(!t.has(i)){n=!0;break}return n||t.getAll().forEach((t=>{let i=!1;for(const n of e)if(JSON.stringify(n)==JSON.stringify(t)){i=!0;break}i||(n=!0)})),n?this.pushApi.updateSettings(e):Promise.resolve()}}])&&Ve(t.prototype,n),i&&Ve(t,i),e}();var Ze=n(8789);function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let $e=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s;const o=n.split("_")[1];this._id=t+"_TEAM_"+o}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&Ke(t.prototype,n),i&&Ke(t,i),e}();function Ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Qe=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,this._id=`lsid_${t}_${n}`}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&Ye(t.prototype,n),i&&Ye(t,i),e}();function Xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let et=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,this._id=`${t}_${n}`}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&Xe(t.prototype,n),i&&Xe(t,i),e}();function tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let nt=function(){function e(t,n){var i,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=void 0,(r="_id")in(i=this)?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s;const o=n.split("_")[2];this._id=t+"_"+o}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&tt(t.prototype,n),i&&tt(t,i),e}();var it=n(64216);function rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let st=function(){function e(){var t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(n="_options")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,this._options=new it.FJ({serialize:e=>e.getValue()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{e&&e.getAll().forEach((e=>{t._options.add(e)})),n(t._options)}))}},{key:"getOptions",value:function(){return this._options.clone()}},{key:"setOptions",value:function(e){return new Promise(((t,n)=>{this._options.clear();const i=[];for(const t of e)this._options.add(t),i.push(t.getValue())}))}}])&&rt(t.prototype,n),i&&rt(t,i),e}();var ot=n(62938),at=n(81254),lt=n(80569);function ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"makeRequest",value:function(e){return new Promise(((t,n)=>{const i={};e.getHeaders().forEach(((e,t)=>{i[t]=e}));const r=e.getParameters();r.appVersion="1.0",r.appId="com.flashscore",lt.post(e.getUrl()).type("form").send(r).timeout({response:e.getPendingTimeout(),deadline:e.getConnectionTimeout()}).set(i).then((e=>{const n=new Map;for(const t in e.header)n.set(t,e.header[t]);t(new at.KH(e.text,e.status,n))}),(e=>n(e.message)))}))}}])&&ut(t.prototype,n),i&&ut(t,i),e}();function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let _t=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ft(this,"_id",void 0),ft(this,"_email",void 0),ft(this,"_hash",void 0),ft(this,"_namespace",void 0),this._id=t,this._email=n,this._hash=i,this._namespace=r}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}},{key:"getEmail",value:function(){return this._email}},{key:"getHash",value:function(){return this._hash}},{key:"getNamespace",value:function(){return this._namespace}}])&&ht(t.prototype,n),i&&ht(t,i),e}();function pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let dt=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vt(this,"_lsnpPath",void 0),vt(this,"_language",void 0),vt(this,"_token",void 0),vt(this,"_enabled",void 0),this._lsnpPath=t,this._language=n,this._token=i||"",this._enabled=void 0===r||r}var t,n,i;return t=e,(n=[{key:"setToken",value:function(e){return this._token=e||"",this}},{key:"getToken",value:function(){return this._token}},{key:"getLsnpPath",value:function(){return this._lsnpPath}},{key:"getLanguage",value:function(){return this._language}},{key:"isEnabled",value:function(){return this._enabled}}])&&pt(t.prototype,n),i&&pt(t,i),e}();function bt(e){return function(e){if(Array.isArray(e))return gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let wt=function(){function e(t,n,i,r,s,o,a,l,u,c,h,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,"_messaging",void 0),mt(this,"_language",void 0),mt(this,"_platformPrefix",void 0),mt(this,"_window",void 0),mt(this,"_navigator",void 0),mt(this,"_serviceWorkerLocation",void 0),mt(this,"_credentials",void 0),mt(this,"_logger",void 0),mt(this,"_permissionProvider",void 0),mt(this,"_enabled",!1),mt(this,"_alertWrapper",void 0),mt(this,"_notificationStatusAlert",void 0),mt(this,"_registrationListener",(()=>null)),mt(this,"_pushApi",void 0),mt(this,"_synchonizer",void 0),mt(this,"_myGames",void 0),mt(this,"_myTeams",void 0),mt(this,"_tokenStorage",void 0),mt(this,"_currentChannels",void 0),mt(this,"_currentDisabledChannels",void 0),mt(this,"_disabledChannels",void 0),mt(this,"_currentSettings",void 0),mt(this,"_loginClient",void 0),mt(this,"_settings",void 0),this._messaging=t,this._language=n,this._platformPrefix=i,this._window=r,this._navigator=s,this._serviceWorkerLocation=o,this._credentials=h,this._logger=f,this._tokenStorage=a,a.init().then((()=>{this.synchronize()})),l.init().then((()=>{this._currentChannels=l,this.synchronize()})),u.init().then((()=>{this._currentDisabledChannels=u,this._disabledChannels=[],this._currentDisabledChannels.getChannels().getAll().forEach((e=>{this._disabledChannels.push(e)})),this.synchronize()})),c.init((0,Ze._)()).then((e=>{this._currentSettings=c;const t=new st;t.init(e).then((()=>{this._settings=t,this.synchronize()}))}))}var t,n,i;return t=e,(n=[{key:"enable",value:function(){this._enabled=!0}},{key:"setPermissionProvider",value:function(e){return this._permissionProvider=e,this}},{key:"setAlertWrapper",value:function(e){return this._alertWrapper=e,this}},{key:"_getToken",value:function(){return this._tokenStorage.getToken()}},{key:"setUserToken",value:function(e){const t=!!this.getUserToken()||this.getUserToken()!==e,n=!this.getUserToken()||this.isUserTokenEnabled();return t&&(this._tokenStorage.setToken(new dt(this._platformPrefix,this._language,e,n)),this.synchronize()),this}},{key:"getUserToken",value:function(){return this._getToken().getToken()}},{key:"isUserTokenEnabled",value:function(){return this._getToken().isEnabled()}},{key:"setUserTokenEnabled",value:function(e){this._tokenStorage.setToken(new dt(this._platformPrefix,this._language,this.getUserToken(),e)),this.synchronize()}},{key:"setMyGames",value:function(e){return this._myGames=e,this}},{key:"setMyTeams",value:function(e){return this._myTeams=e,this}},{key:"setLoginClient",value:function(e){return this._loginClient=e,this}},{key:"_getApi",value:function(){return this._pushApi||(this._pushApi=(new Je).setPlatformPrefix(this._platformPrefix).setRequestor(new ct).setUserTokenGetter((()=>this.getUserToken())).build()),this._pushApi}},{key:"_getSynchronizer",value:function(){return this._synchonizer||(this._synchonizer=new Be(this._getApi(),(()=>this.getCurrentChannels()),(()=>this.getCurrentDisabledChannels()),(()=>this.getCurrentSettings()))),this._synchonizer}},{key:"getStatusAlert",value:function(){return this._notificationStatusAlert||(this._notificationStatusAlert=new A(this._permissionProvider,this._alertWrapper)),this._notificationStatusAlert}},{key:"getNotificationInit",value:function(){const e=new f(this._messaging),t=new v(this._navigator,this._window),n=new c(new g(this._navigator,this._serviceWorkerLocation),this._registrationListener),i=new m(this._messaging),r=new C(this._messaging,(e=>this.setUserToken(e)));return new a(e,t,n,i,r,this._logger)}},{key:"getCurrentChannels",value:function(){return this._currentChannels.getChannels()}},{key:"getCurrentDisabledChannels",value:function(){return this._currentDisabledChannels.getChannels()}},{key:"getCurrentSettings",value:function(){const e=this._currentSettings.getOptions();if(e.isEmpty())for(const t of Ze.A)e.add(t);return e}},{key:"addSettingOption",value:function(e){const t=this._getSettingsOptions();return t.push(new ot.I(e)),this._settings.setOptions(t)}},{key:"removeSettingOption",value:function(e){const t=this._getSettingsOptions().filter((t=>t.getValue()!==e));return this._settings.setOptions(t)}},{key:"muteChannel",value:function(e){const t=this._getDisabledChannels();return t.push(new et(this._language,e)),this._disabledChannels=t,this.synchronize()}},{key:"unMuteChannel",value:function(e){const t=new et(this._language,e).getId(),n=this._getDisabledChannels().filter((e=>e.getId()!==t));return this._disabledChannels=n,this.synchronize()}},{key:"synchronize",value:function(){return new Promise(((e,t)=>{if(!(this._enabled&&this.getUserToken()&&this._currentSettings&&this._currentChannels&&this._currentDisabledChannels))return void e(!1);const n=[];this.isUserTokenEnabled()&&(n.push.apply(n,bt(this._getLoginClientChannels())),n.push.apply(n,bt(this._getMyGamesChannels())),n.push.apply(n,bt(this._getMyTeamsChannels())));const i=this._getDisabledChannels(),r=[];r.push.apply(r,bt(this._getSettingsOptions())),this._getSynchronizer().channelsChanged(n,i,r).then((()=>{this._currentChannels.setChannels(n),this._currentDisabledChannels.setChannels(i),this._currentSettings.setOptions(r),e(!0)})).catch((()=>{e(!1)}))}))}},{key:"_getDisabledChannels",value:function(){return this._disabledChannels}},{key:"_getSettingsOptions",value:function(){const e=[];let t;return t=this._settings?this._settings.getOptions():(0,Ze._)(),t.getAll().forEach((t=>{e.push(t)})),e}},{key:"_getMyGamesChannels",value:function(){const e=[];if(this._myGames){const t=this._myGames.getContainer();if(t){const n=Object.keys(t);for(const t of n)e.push(new nt(this._language,t))}}return e}},{key:"_getMyTeamsChannels",value:function(){const e=[];if(this._myTeams){const t=this._myTeams.getParticipantKeysFromLsid();if(t)for(const n of t)e.push(new $e(this._language,n))}return e}},{key:"_getLoginClientChannels",value:function(){const e=[];if(this._loginClient&&this._loginClient.loggedIn()){const t=this._loginClient.id(),n=this._loginClient.email(),i=this._loginClient.hash(),r=this._loginClient.namespace();t&&n&&r&&i&&(e.push(new Qe(n,r)),this._credentials.setCredentials(new _t(t,n,i,r)))}return e}}])&&yt(t.prototype,n),i&&yt(t,i),e}();function kt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Ct=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_id")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._id=t}var t,n,i;return t=e,(n=[{key:"getId",value:function(){return this._id}}])&&kt(t.prototype,n),i&&kt(t,i),e}();function Pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let St=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tt(this,"_key","lsnp_channels"),Tt(this,"_storage",void 0),Tt(this,"_channels",void 0),this._storage=t,this._channels=new it.FJ({serialize:e=>e.getId()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{t._storage.get(t._key).then((i=>{if(i)for(const e of i)t._channels.add(new Ct(e));else e&&e.getAll().forEach((e=>{t._channels.add(e)}));n(t._channels)}))}))}},{key:"getChannels",value:function(){return this._channels.clone()}},{key:"setChannels",value:function(e){return new Promise(((t,n)=>{this._channels.clear();const i=[];for(const t of e)this._channels.add(t),i.push(t.getId());this._storage.set(this._key,i).then((()=>t())).catch((e=>n()))}))}}])&&Pt(t.prototype,n),i&&Pt(t,i),e}();function Ot(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),It(this,"STORAGE_KEY","lsnp_token"),It(this,"_storage",void 0),It(this,"_tokens",void 0),this._storage=t,this._tokens=new it.FJ({serialize:e=>e.getToken()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{this._storage.get(this.STORAGE_KEY).then((i=>{i?t._tokens.add(new dt(i._lsnpPath,i._language,i._token,i._enabled)):e&&e.getAll().forEach((e=>{t._tokens.add(e)})),n(t._tokens)}))}))}},{key:"getToken",value:function(){const e=this._tokens.clone().getAll();return e.length?e[0]:new dt("","")}},{key:"setToken",value:function(e){return new Promise(((t,n)=>{this._tokens.clear(),this._tokens.add(e),this._storage.set(this.STORAGE_KEY,e).then((()=>t())).catch((e=>n()))}))}}])&&Ot(t.prototype,n),i&&Ot(t,i),e}();function At(e,t){return At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},At(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Dt(e);if(t){var r=Dt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?qt(e):t}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}let Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(n,e);var t=jt(n);function n(...e){var i,r,s,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),i=t.call.apply(t,[this].concat(e)),r=qt(i),o="lsnp_channels_disabled",(s="_key")in r?Object.defineProperty(r,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[s]=o,i}return n}(St);function Rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Wt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ft(this,"STORAGE_KEY","lsnp_credentials_3"),Ft(this,"_storage",void 0),Ft(this,"_credentials",void 0),this._storage=t,this._credentials=new it.FJ({serialize:e=>e.getHash()}),this._loadCredentials()}var t,n,i;return t=e,(n=[{key:"getCredentials",value:function(){return this._credentials.clone()}},{key:"setCredentials",value:function(e){return new Promise(((t,n)=>{this._credentials.clear(),this._credentials.add(e),this._storage.set(this.STORAGE_KEY,e).then((()=>t())).catch((e=>n()))}))}},{key:"_loadCredentials",value:function(){const e=this;this._storage.get(this.STORAGE_KEY).then((t=>{t&&e._credentials.add(new _t(t._id,t._email,t._hash,t._namespace))}))}}])&&Rt(t.prototype,n),i&&Rt(t,i),e}();function xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ut=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mt(this,"_key","lsnp_options"),Mt(this,"_storage",void 0),Mt(this,"_options",void 0),this._storage=t,this._options=new it.FJ({serialize:e=>e.getValue()})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){const t=this;return new Promise((n=>{this._storage.get(this._key).then((i=>{if(i)for(const e of i)t._options.add(new ot.I(e));else e&&e.getAll().forEach((e=>{t._options.add(e)}));n(t._options)}))}))}},{key:"getOptions",value:function(){return this._options.clone()}},{key:"setOptions",value:function(e){return new Promise(((t,n)=>{this._options.clear();const i=[];for(const t of e)this._options.add(t),i.push(t.getValue());this._storage.set(this._key,i).then((()=>t())).catch((e=>n()))}))}}])&&xt(t.prototype,n),i&&xt(t,i),e}();function Gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Jt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zt(this,"_window",window),zt(this,"_navigator",navigator),zt(this,"_messaging",void 0),zt(this,"_serviceWorkerLocation",void 0),zt(this,"_logger",void 0),zt(this,"_language",void 0),zt(this,"_platformPrefix",void 0),zt(this,"_token",void 0),zt(this,"_currentChannels",void 0),zt(this,"_currentDisabledChannels",void 0),zt(this,"_currentOptions",void 0),zt(this,"_credentials",void 0)}var t,n,i;return t=e,(n=[{key:"setFirebaseConfiguration",value:function(e){const t=r.initializeApp(e);return this._messaging=t.messaging(),this}},{key:"setLanguage",value:function(e){return this._language=e,this}},{key:"setPlatformPrefix",value:function(e){return this._platformPrefix=e,this}},{key:"setBrowserDepenedency",value:function(e,t){return this._window=e,this._navigator=t,this}},{key:"setServiceWorkerLocation",value:function(e){return this._serviceWorkerLocation=e,this}},{key:"setTokenStorage",value:function(e){return this._token=new Et(e),this}},{key:"setSettingsStorage",value:function(e){return this._currentChannels=new St(e),this._currentDisabledChannels=new Lt(e),this._currentOptions=new Ut(e),this}},{key:"setCredentialsStorage",value:function(e){return this._credentials=new Wt(e),this}},{key:"setLogger",value:function(e){return this._logger=e,this}},{key:"build",value:function(){return new wt(this._messaging,this._language,this._platformPrefix,this._window,this._navigator,this._serviceWorkerLocation,this._token,this._currentChannels,this._currentDisabledChannels,this._currentOptions,this._credentials,this._logger)}}])&&Gt(t.prototype,n),i&&Gt(t,i),e}();var Vt=n(79475);function Ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}let Bt=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_storage")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._storage=new Vt.oQ(Vt.W.make(t))}var t,n,i;return t=e,(n=[{key:"getStorage",value:function(){return this._storage}}])&&Ht(t.prototype,n),i&&Ht(t,i),e}();var Zt,Kt,$t,Yt,Qt,Xt,en,tn,nn,rn,sn,on,an,ln,un,cn=n(27925);Zt=document,Kt=navigator,$t=window,Yt=cjs.Api.clientStorage,Qt=cjs.dic.get("util_trans"),Xt=cjs.Api.loader.get("notifications"),en=cjs.Api.loader.get("notifications/gui"),tn=cjs.Api.loader.get("notifications/subscribe"),nn=cjs.Api.loader.get("cjs"),rn=cjs.Api.loader.get("myGames"),sn=cjs.Api.loader.get("myTeams"),on=cjs.Api.loader.get("loginClient"),an=cjs.dic.get("HighlightWindowManager"),ln=()=>cjs.Api.config.get("app","google_analytics","event_tracking"),un=window.dataLayer=window.dataLayer||[],nn.call((e=>{if(!cjs.Api.config.get("app","native_notifications","enabled")||!r.messaging.isSupported()||!cjs.dic.get("util_browser").isMobile()&&cjs.Api.config.get("app","project","id")!=cn.m.TESTLIVESPORT_CZ_CZ&&cjs.Api.config.get("app","project","id")!=cn.m.TESTLIVESPORT_CZ_EN)return void Xt.fulfill((e=>{e(!1)}));const t=cjs.Api.config.get("app","url_prefix")+"/x/js/worker.js",n=(new Jt).setFirebaseConfiguration(cjs.Api.config.get("app","native_notifications","firebase")).setPlatformPrefix(cjs.Api.config.get("app","native_notifications","lsnp")).setLanguage(cjs.Api.config.get("app","lang","web")).setBrowserDepenedency($t,Kt).setServiceWorkerLocation(t).setTokenStorage(new Bt("lsnp").getStorage()).setSettingsStorage(new Bt("lsnp").getStorage()).setCredentialsStorage(new Bt("lsnp").getStorage()).setLogger((e=>{clog("PushNotification",e)})).build();if("Notification"in $t){const e=document.getElementById("notifications-alert-wrapper"),t=n.getNotificationInit(),r=()=>{t.run().then((e=>{n.getStatusAlert().hideAlert(),e==i.INITIALIZED?(()=>{ln()&&un.push({event:"webNotificationStatus",webNotification:"on"});const e=Zt.getElementById("userNotifications");e&&e.classList.add("userControls__item--open"),en.call((t=>{t.enable(),e&&e.addEventListener("click",(e=>{an.changeActive("verticalMenu",!1),t.getHandlerOnClick()(e)}))})),n.enable();const t=()=>(n.getStatusAlert().showAlert(),n.synchronize());rn.call((e=>{n.setMyGames(e),e.addChangeCallback(t),t()})),sn.call((e=>{n.setMyTeams(e),e.registerCallback("add",t),e.registerCallback("remove",t),e.registerCallback("dataLoaded",t),t()})),on.call((e=>{n.setLoginClient(e),e.registerCallback("login",t),e.registerCallback("logout",t),e.registerCallback("dataSyncChange/mygames",t),e.registerCallback("dataSyncChange/myTeams",t),t()})),Xt.fulfill((e=>{e(n)}))})():ln()&&un.push({event:"webNotificationStatus",webNotification:"off"})})).catch((e=>{n.getStatusAlert().hideAlert()}))};tn.fulfill((e=>{e(r)}));const s=()=>{ln()&&un.push({event:"webNotificationStatus",webNotification:"off"}),en.call((e=>{e.updateStatus()}));const e=()=>{n.getStatusAlert().showAlert();const e=Zt.getElementById("notifications-alert");if(e){const t=e.querySelector(".alert__close");t&&t.addEventListener("click",(()=>{Yt.storeSession("LS_notifications_dismissed",1,1209600)}))}};rn.call((t=>{n.setMyGames(t),t.addChangeCallback(e)})),sn.call((t=>{n.setMyTeams(t),t.registerCallback("add",e),t.registerCallback("remove",e),t.registerCallback("dataLoaded",e)})),on.call((t=>{n.setLoginClient(t),t.registerCallback("login",e),t.registerCallback("logout",e),t.registerCallback("dataSyncChange/mygames",e),t.registerCallback("dataSyncChange/myTeams",e)}))},o=()=>{ln()&&un.push({event:"webNotificationStatus",webNotification:"disallow"}),en.call((e=>{e.updateStatus()}));const e=Zt.getElementById("notifications-alert");if(e){const t=e.querySelector(".alert__close");t&&t.addEventListener("click",(()=>{Yt.storeSession("LS_notifications_dismissed",1,7776e3)}))}const t=Zt.getElementById("userNotifications");if(t){t.classList.add("userControls__item--open");const e=t.querySelector(".userControls__textNotifications");e&&e.classList.add("userControls__textNotifications--open")}};n.setPermissionProvider((()=>Notification.permission)).setAlertWrapper(e).getStatusAlert().setStorage(Yt).setTranslations(Qt).setSubscribeCallback(r).setPendingCallback(s).setDeniedCallback(o).run()}}))},25702:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{c:()=>s});let s=function(){function e(t,n,i=new Map,s=e.DEFAULT_CONNECTION_TIMEOUT,o=e.DEFAULT_PENDING_TIMEOUT){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_url",void 0),r(this,"_headers",void 0),r(this,"_parameters",void 0),r(this,"_connectionTimeout",void 0),r(this,"_pendingTimeout",void 0),this._url=t,this._parameters=n,this._headers=i,this._connectionTimeout=s,this._pendingTimeout=o}var t,n,s;return t=e,(n=[{key:"getConnectionTimeout",value:function(){return this._connectionTimeout}},{key:"getPendingTimeout",value:function(){return this._pendingTimeout}},{key:"getUrl",value:function(){return this._url}},{key:"getParameters",value:function(){return this._parameters}},{key:"getHeaders",value:function(){return this._headers}}])&&i(t.prototype,n),s&&i(t,s),e}();r(s,"DEFAULT_CONNECTION_TIMEOUT",5e3),r(s,"DEFAULT_PENDING_TIMEOUT",15e3)},8789:(e,t,n)=>{n.d(t,{A:()=>s,_:()=>o});var i=n(64216),r=n(62938);const s=[new r.I("sport_1;3"),new r.I("sport_1;4"),new r.I("sport_1;41"),new r.I("sport_2;3"),new r.I("sport_3;3"),new r.I("sport_4;3"),new r.I("sport_4;4"),new r.I("sport_4;41"),new r.I("sport_5;3"),new r.I("sport_6;3"),new r.I("sport_7;3"),new r.I("sport_8;3"),new r.I("sport_9;3"),new r.I("sport_10;3"),new r.I("sport_11;3"),new r.I("sport_12;3"),new r.I("sport_13;3"),new r.I("sport_14;3"),new r.I("sport_15;3"),new r.I("sport_16;3"),new r.I("sport_17;3"),new r.I("sport_18;3"),new r.I("sport_19;3"),new r.I("sport_21;3"),new r.I("sport_22;3"),new r.I("sport_24;3"),new r.I("sport_25;3"),new r.I("sport_26;3"),new r.I("sport_28;3"),new r.I("sport_29;3"),new r.I("sport_30;3"),new r.I("sport_34;63"),new r.I("sport_36;3"),new r.I("sport_23;63"),new r.I("sport_23;103"),new r.I("sport_23;62"),new r.I("sport_23;60"),new r.I("sport_23;101"),new r.I("sport_23;61"),new r.I("sport_42;3"),new r.I("sport_31;63"),new r.I("sport_31;103"),new r.I("sport_31;62"),new r.I("sport_32;63"),new r.I("sport_32;103"),new r.I("sport_32;62"),new r.I("sport_33;63"),new r.I("sport_33;103"),new r.I("sport_33;62"),new r.I("sport_37;60"),new r.I("sport_37;61"),new r.I("sport_37;101"),new r.I("sport_37;62"),new r.I("sport_37;63"),new r.I("sport_37;103"),new r.I("sport_38;60"),new r.I("sport_38;61"),new r.I("sport_38;101"),new r.I("sport_38;62"),new r.I("sport_38;63"),new r.I("sport_38;103"),new r.I("sport_39;60"),new r.I("sport_39;61"),new r.I("sport_39;101"),new r.I("sport_39;62"),new r.I("sport_39;63"),new r.I("sport_39;103"),new r.I("sport_40;60"),new r.I("sport_40;61"),new r.I("sport_40;101"),new r.I("sport_40;62"),new r.I("sport_40;63"),new r.I("sport_40;103"),new r.I("sport_41;60"),new r.I("sport_41;61"),new r.I("sport_41;101"),new r.I("sport_41;62"),new r.I("sport_41;63"),new r.I("sport_41;103")];function o(){const e=new i.FJ({serialize:e=>e.getValue()});for(const t of s)e.add(t);return e}},62938:(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{I:()=>r});let r=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(i="_id")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._id=t}var t,n,r;return t=e,(n=[{key:"getValue",value:function(){return this._id}}])&&i(t.prototype,n),r&&i(t,r),e}()},27925:(e,t,n)=>{var i;n.d(t,{m:()=>i}),function(e){e[e.FLASHSCORE_CO_KR=34]="FLASHSCORE_CO_KR",e[e.FLASHSCORE_CO_JP=39]="FLASHSCORE_CO_JP",e[e.TESTLIVESPORT_CZ_CZ=29]="TESTLIVESPORT_CZ_CZ",e[e.TESTLIVESPORT_CZ_EN=49]="TESTLIVESPORT_CZ_EN"}(i||(i={}))}},e=>{e.O(0,[1216],(()=>{return t=23831,e(e.s=t);var t}));e.O()}]);